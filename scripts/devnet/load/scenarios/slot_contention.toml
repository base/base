# From https://github.com/flashbots/contender/blob/3a7830bf21576153d7ded7cf9912056680357b77/scenarios/slotContention.toml

[[create]]
# source: https://github.com/zeroXbrock/slot-conflict-sol
name = "slotContention"
bytecode = "0x608060405234801561001057600080fd5b50610bb5806100206000396000f3fe60806040526004361061008a5760003560e01c80633b45d703116100595780633b45d70314610137578063b60ab2a814610157578063b6a324e014610177578063b82a721b1461017f578063d252124f1461019f57600080fd5b806311d5d1f4146100965780631b5ac4b5146100b85780632123c06a146100ea57806326ccecfd1461011757600080fd5b3661009157005b600080fd5b3480156100a257600080fd5b506100b66100b13660046107b5565b6101bf565b005b3480156100c457600080fd5b506100d86100d3366004610801565b610279565b60405190815260200160405180910390f35b3480156100f657600080fd5b506100d8610105366004610801565b60009081526020819052604090205490565b34801561012357600080fd5b506100b6610132366004610866565b610297565b34801561014357600080fd5b506100b6610152366004610866565b6103c9565b34801561016357600080fd5b506100b6610172366004610957565b6104ee565b6100b6610623565b34801561018b57600080fd5b506100b661019a366004610957565b610675565b3480156101ab57600080fd5b506100b66101ba366004610992565b610749565b413185810361026257604051600090419089908381818185875af1925050503d806000811461020a576040519150601f19603f3d011682016040523d82523d6000602084013e61020f565b606091505b505090508061025c5760405162461bcd60e51b81526020600482015260146024820152732330b4b632b2103a379039b2b7321022ba3432b960611b60448201526064015b60405180910390fd5b5061026f565b61026f8886868686610675565b5050505050505050565b60008082126102885781610291565b610291826109ca565b92915050565b8883146102e65760405162461bcd60e51b815260206004820181905260248201527f536c6f747320616e642076616c756573206c656e677468206d69736d617463686044820152606401610253565b8887146103055760405162461bcd60e51b8152600401610253906109e6565b8885146103245760405162461bcd60e51b815260040161025390610a2c565b60005b898110156103bc576103b48b8b8381811061034457610344610a72565b905060200201358a8a8481811061035d5761035d610a72565b9050602002013589898581811061037657610376610a72565b9050602002013588888681811061038f5761038f610a72565b905060200201358787878181106103a8576103a8610a72565b90506020020135610675565b600101610327565b5050505050505050505050565b8883146104185760405162461bcd60e51b815260206004820181905260248201527f536c6f747320616e642076616c756573206c656e677468206d69736d617463686044820152606401610253565b8887146104375760405162461bcd60e51b8152600401610253906109e6565b8885146104565760405162461bcd60e51b815260040161025390610a2c565b60005b898110156103bc576104e68b8b8381811061047657610476610a72565b905060200201358a8a8481811061048f5761048f610a72565b905060200201358989858181106104a8576104a8610a72565b905060200201358888868181106104c1576104c1610a72565b905060200201358787878181106104da576104da610a72565b905060200201356104ee565b600101610459565b60008581526020819052604090205484811080159061050d5750838111155b6105295760405162461bcd60e51b815260040161025390610a88565b60008681526020818152604080832086905580518381529182019052419084906040516105569190610add565b60006040518083038185875af1925050503d8060008114610593576040519150601f19603f3d011682016040523d82523d6000602084013e610598565b606091505b50509050806105e05760405162461bcd60e51b81526020600482015260146024820152732330b4b632b2103a379039b2b7321022ba3432b960611b6044820152606401610253565b60408051888152602081018690527f1224c0b1b1fc9b317194a91a14e45a82b4a46b12e44848ddf8f20f5f69567fcd91015b60405180910390a150505050505050565b600034116106735760405162461bcd60e51b815260206004820152601b60248201527f596f75206e65656420746f2073656e6420736f6d6520457468657200000000006044820152606401610253565b565b600085815260208190526040812054906106926100d38584610b0c565b90508582101580156106a45750848211155b6106c05760405162461bcd60e51b815260040161025390610a88565b6000878152602081905260409020849055416108fc6106e0836001610b33565b6106ea9086610b55565b6040518115909202916000818181858888f19350505050158015610712573d6000803e3d6000fd5b5060408051888152602081018690527f1224c0b1b1fc9b317194a91a14e45a82b4a46b12e44848ddf8f20f5f69567fcd9101610612565b600082815260208190526040812054906107638383610b6c565b6000858152602081815260409182902083905581518781529081018390529192507f1224c0b1b1fc9b317194a91a14e45a82b4a46b12e44848ddf8f20f5f69567fcd910160405180910390a150505050565b600080600080600080600060e0888a0312156107d057600080fd5b505085359760208701359750604087013596606081013596506080810135955060a0810135945060c0013592509050565b60006020828403121561081357600080fd5b5035919050565b60008083601f84011261082c57600080fd5b50813567ffffffffffffffff81111561084457600080fd5b6020830191508360208260051b850101111561085f57600080fd5b9250929050565b60008060008060008060008060008060a08b8d03121561088557600080fd5b8a3567ffffffffffffffff8082111561089d57600080fd5b6108a98e838f0161081a565b909c509a5060208d01359150808211156108c257600080fd5b6108ce8e838f0161081a565b909a50985060408d01359150808211156108e757600080fd5b6108f38e838f0161081a565b909850965060608d013591508082111561090c57600080fd5b6109188e838f0161081a565b909650945060808d013591508082111561093157600080fd5b5061093e8d828e0161081a565b915080935050809150509295989b9194979a5092959850565b600080600080600060a0868803121561096f57600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b600080604083850312156109a557600080fd5b50508035926020909101359150565b634e487b7160e01b600052601160045260246000fd5b6000600160ff1b82016109df576109df6109b4565b5060000390565b60208082526026908201527f536c6f747320616e64206c6f77657220626f756e6473206c656e677468206d696040820152650e6dac2e8c6d60d31b606082015260800190565b60208082526026908201527f536c6f747320616e6420757070657220626f756e6473206c656e677468206d696040820152650e6dac2e8c6d60d31b606082015260800190565b634e487b7160e01b600052603260045260246000fd5b60208082526035908201527f43757272656e742076616c756520646f6573206e6f742066616c6c2077697468604082015274696e207468652065787065637465642072616e676560581b606082015260800190565b6000825160005b81811015610afe5760208186018101518583015201610ae4565b506000920191825250919050565b8181036000831280158383131683831282161715610b2c57610b2c6109b4565b5092915050565b600082610b5057634e487b7160e01b600052601260045260246000fd5b500490565b8082028115828204841417610291576102916109b4565b80820180821115610291576102916109b456fea264697066735822122048754416ad62e6a7bc959c3873309e88ede22ff101252b1d76c4fe1feb3a0a2a64736f6c63430008180033"


[[setup]]
to = "{slotContention}"
kind = "fund_contract"
signature = "fundMe()"
args = []
value = "1eth"

# unlikely to fail for a long time
[[spam]]
[spam.tx]
to = "{slotContention}"
from_pool = "spammer"
signature = "function writeToSlot(uint256 slot, uint256 lower, uint256 upper, uint256 newValue, uint256 payment) public"
args = ["0", "0", "1000", "420", "10000000000000"]
gas_limit = 151000
fuzz = [
    { param = "slot", min = "0", max = "0xffffffffffffffffffffffffffffffff" },
    { param = "lower", min = "0", max = "500" },
    { param = "upper", min = "0", max = "500" },
    { param = "newValue", min = "0", max = "500" },
    { param = "payment", min = "0", max = "100000000000000" },
]
